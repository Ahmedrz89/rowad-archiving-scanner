<Window
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
                xmlns:local="clr-namespace:ScannerApplication" x:Class="ScannerApplication.MainWindow"
                Title="المرفقات" Height="350" Width="525" FontSize="12" WindowState="Maximized" WindowStartupLocation="CenterScreen" FlowDirection="RightToLeft" FontFamily="Droid Arabic Kufi">
    <Window.Resources>
        <local:ViewModel x:Key="ViewModel"/>
        <telerik:QueryableCollectionViewSource Source="{Binding Attachments, Source={StaticResource ViewModel}}" x:Key="qcvs"/>

    </Window.Resources>
    <Grid DataContext="{StaticResource ViewModel}">
        <telerik:RadCardView  Margin="10,56,10,45" x:Name="cardView"
                             MinorLength="500"
                             MajorLength ="450"
                             DataFieldDescriptorsButtonVisibility="Collapsed"
                             CardHeaderBinding="{Binding Path=.}"
                             AutoGenerateDataFieldDescriptors="False"
                             ItemsSource="{Binding Attachments, Source={StaticResource ViewModel}}"                            
                             Loaded="cardView_Loaded" ShowGroupPanel="False">
            <telerik:RadCardView.CardHeaderTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding FileType.DisplayName}" />
                    </StackPanel>
                </DataTemplate>
            </telerik:RadCardView.CardHeaderTemplate>
            <telerik:RadCardView.DataFieldDescriptors>
                <telerik:CardDataFieldDescriptor  Header="الملف" IsReadOnly="True" EditorTemplate="{x:Null}" AllowGrouping="False">
                    <telerik:CardDataFieldDescriptor.ReadOnlyTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#E6E6E6" BorderThickness="1" 
                                    HorizontalAlignment="Left" 
                                    VerticalAlignment="Center"
                                    Margin="0 5 0 0">
                                <Image RenderOptions.BitmapScalingMode="HighQuality"
                                       Width="350" Height="400" 
                                       Source="{Binding Picture}" />
                            </Border>
                        </DataTemplate>
                    </telerik:CardDataFieldDescriptor.ReadOnlyTemplate>
                </telerik:CardDataFieldDescriptor>
                <telerik:CardDataFieldDescriptor Header="نوع الملف" DataMemberBinding="{Binding FileType.AttachmentTypeName}">
                    <telerik:CardDataFieldDescriptor.EditorTemplate>
                        <DataTemplate>
                            <telerik:RadComboBox Width="300"  ItemsSource="{Binding FileTypes, Source={StaticResource ViewModel}}" 
                                                 SelectedItem="{Binding FileType, Mode=TwoWay}" SelectedValuePath="AttachmentTypeId" DisplayMemberPath ="AttachmentTypeName"/>
                        </DataTemplate>
                    </telerik:CardDataFieldDescriptor.EditorTemplate>
                </telerik:CardDataFieldDescriptor>
            </telerik:RadCardView.DataFieldDescriptors>
        </telerik:RadCardView>
        <telerik:RadButton x:Name="BtnScan" Content="مسح" HorizontalAlignment="Left" Height="NaN" Margin="10,22,0,0" VerticalAlignment="Top" Width="57" Click="BtnScan_Click"/>
        <telerik:RadButton x:Name="BtnSave" Content="حفظ" HorizontalAlignment="Left" Height="30" Margin="10,0,0,10" Width="57" VerticalAlignment="Bottom" Click="BtnSave_Click"/>
        <telerik:RadButton x:Name="BtnClose" Content="اغلاق" HorizontalAlignment="Left" Height="30" Margin="72,0,0,10" Width="57" VerticalAlignment="Bottom" Click="BtnClose_Click"/>

    </Grid>
</Window>
